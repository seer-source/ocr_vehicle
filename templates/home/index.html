{% extends 'base_page.html' %}
{% load static %}
{% load custom_filters %}
{% load humanize %}
{% block content %}

  <div class="  my-4  text-end">
    <div class=""> 
        <p class="fw-semibold fs-18 mb-0">Welcome back, {{user.first_name}} {{user.last_name}} !</p>
        <span class="fs-semibold text-muted">Track your sales activity, leads and deals here.</span>
    </div>
    
</div>
<div class="row">
    <div class="col-xxl-9 col-xl-12">
        <div class="row">
            <div class="col-xl-4">
                <!-- <div class="row">
                    <div class="col-xl-12">
                        <div class="card custom-card crm-highlight-card">
                            <div class="card-body">
                                <div class="d-flex align-items-center justify-content-between">
                                    <div>
                                        <div class="fw-semibold fs-18 text-fixed-white mb-2">Your target is incomplete</div>
                                        <span class="d-block fs-12 text-fixed-white"><span class="op-7">You have completed</span> <span class="fw-semibold text-warning">48%</span> <span class="op-7">of the given target, you can also check your status</span>.</span>
                                        <span class="d-block fw-semibold mt-1"><a class="text-fixed-white" href="javascript:void(0);"><u>Click here</u></a></span>
                       i             </div>
                                    <div>
                                        <div id="crm-main"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div> -->
                <div class="col-xl-12">
                    <div class="card custom-card">
                        <div class="card-header  justify-content-between">
                            <div class="card-title">
                                اكثر الزائرين حضورا
                            </div>
                            <!-- <div class="dropdown">
                                <a aria-label="anchor" href="javascript:void(0);" class="btn btn-icon btn-sm btn-light" data-bs-toggle="dropdown" aria-expanded="false">
                                    <i class="fe fe-more-vertical"></i>
                                </a>ال
                                <ul class="dropdown-menu">
                                    <li><a class="dropdown-item" href="javascript:void(0);">Week</a></li>
                                    <li><a class="dropdown-item" href="javascript:void(0);">Month</a></li>
                                    <li><a class="dropdown-item" href="javascript:void(0);">Year</a></li>
                                </ul>
                            </div> -->
                        </div>
                        <div class="card-body">
                            <ul class="list-unstyled crm-top-deals mb-0">
                                {% for vis in most_visitor %}
                                <li>
                                    <div class="d-flex align-items-top flex-wrap">
                                        <div class="me-2">
                                            <span class="avatar avatar-sm avatar-rounded">
                                                <img src="http://localhost:8000/media/{{vis.person_id__image}}" alt="">
                                            </span>
                                        </div>
                                        <div class="flex-fill">
                                            <p class="fw-semibold mb-0">{{vis.person_id__name}}</p>
                                            <span class="text-muted fs-12">{{vis.person_id__job_title}}</span>
                                        </div>
                                        <div class="fw-semibold fs-15">{{vis.visits}}</div>
                                    </div>
                                </li>
                                {% endfor %}
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="col-xl-12">
                    <div class="card custom-card">
                        <div class="card-header  justify-content-between">
                            <div class="card-title">
                                اكثر الزائرون حضورا بعد ساعات العمل 
                            </div>
                            <!-- <div class="dropdown">
                                <a aria-label="anchor" href="javascript:void(0);" class="btn btn-icon btn-sm btn-light" data-bs-toggle="dropdown" aria-expanded="false">
                                    <i class="fe fe-more-vertical"></i>
                                </a>
                                <ul class="dropdown-menu">
                                    <li><a class="dropdown-item" href="javascript:void(0);">Week</a></li>
                                    <li><a class="dropdown-item" href="javascript:void(0);">Month</a></li>
                                    <li><a class="dropdown-item" href="javascript:void(0);">Year</a></li>
                                </ul>
                            </div> -->
                        </div>
                        <div class="card-body">
                            <ul class="list-unstyled crm-top-deals mb-0">
                                {% for vis in most_visitor_after %}
                                <li>
                                    <div class="d-flex align-items-top flex-wrap">
                                        <div class="me-2">
                                            <span class="avatar avatar-sm avatar-rounded">
                                                <img src="http://localhost:8000/media/{{vis.person_id__image}}" alt="">
                                            </span>
                                        </div>
                                        <div class="flex-fill">
                                            <p class="fw-semibold mb-0">{{vis.person_id__name}}</p>
                                            <span class="text-muted fs-12">{{vis.person_id__job_title}}</span>
                                        </div>
                                        <div class="fw-semibold fs-15">{{vis.visits}}</div>
                                    </div>
                                </li>
                                {% endfor %}
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="col-xl-12">
                    <div class="card custom-card">
                        <div class="card-header  justify-content-between">
                            <div class="card-title">
                                اكثر الزائرون حضورا  علي الاقسام 
                            </div>
                        
                        </div>
                        <div class="card-body">
                            <ul class="list-unstyled crm-top-deals mb-0">
                                {% for vis in most_visitor_dep %}
                                <li>
                                    <div class="d-flex align-items-top flex-wrap">
                                        <div class="me-2">
                                            <span class="avatar avatar-sm avatar-rounded">
                                                <img src="http://localhost:8000/media/{{vis.person_id__image}}" alt="">
                                            </span>
                                        </div>
                                        <div class="flex-fill">
                                            <p class="fw-semibold mb-0">{{vis.person_id__name}}</p>
                                            <span class="text-muted fs-12">{{vis.person_id__job_title}}</span>
                                        </div>
                                        <div class="fw-semibold fs-15">{{vis.visits}}</div>
                                    </div>
                                </li>
                                {% endfor %}
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="col-xl-12">
                    <div class="card custom-card">
                        <div class="card-header  justify-content-between">
                            <div class="card-title">
                                اكثر الموظفون حضورا
                            </div>
                        
                        </div>
                        <div class="card-body">
                            <ul class="list-unstyled crm-top-deals mb-0">
                                {% for vis in most_empolyee %}
                                <li>
                                    <div class="d-flex align-items-top flex-wrap">
                                        <div class="me-2">
                                            <span class="avatar avatar-sm avatar-rounded">
                                                <img src="http://localhost:8000/media/{{vis.person_id__image}}" alt="">
                                            </span>
                                        </div>
                                        <div class="flex-fill">
                                            <p class="fw-semibold mb-0">{{vis.person_id__name}}</p>
                                            <span class="text-muted fs-12">{{vis.person_id__job_title}}</span>
                                        </div>
                                        <div class="fw-semibold fs-15">{{vis.visits}}</div>
                                    </div>
                                </li>
                                {% endfor %}
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-xl-8">
                <div class="row">
                    <div class="col-xxl-6 col-lg-6 col-md-6">
                        <div class="card custom-card overflow-hidden">
                            <div class="card-body">
                                <div class="d-flex align-items-top justify-content-between">
                                    <div>
                                        <span class="avatar avatar-md avatar-rounded bg-primary">
                                            <i class="ti ti-users fs-16"></i>
                                        </span>
                                    </div>
                                    <div class="flex-fill ms-3">
                                        <div class="d-flex align-items-center justify-content-between flex-wrap">
                                            <div>
                                                <p class="text-muted mb-0"> عدد الزائرين النشط </p>
                                                <h4 class="fw-semibold mt-1">{{all_visitor}}</h4>
                                            </div>
                                            <div id="crm-total-customers"></div>
                                        </div>
                                        <div class="d-flex align-items-center justify-content-between mt-1">
                                            <div>
                                                <a class="text-primary" href="{% url 'show_table' 1 %}">رؤية الجميع<i class="ti ti-arrow-narrow-right ms-2 fw-semibold d-inline-block"></i></a>
                                            </div>
                                            <div class="text-end">
                                                <p class="mb-0 text-success fw-semibold">+40%</p>
                                                <span class="text-muted op-7 fs-11">هذا الشهر </span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-xxl-6 col-lg-6 col-md-6">
                        <div class="card custom-card overflow-hidden">
                            <div class="card-body">
                                <div class="d-flex align-items-top justify-content-between">
                                    <div>
                                        <span class="avatar avatar-md avatar-rounded bg-secondary">
                                            <i class="ti ti-wallet fs-16"></i>
                                        </span>
                                    </div>
                                    <div class="flex-fill ms-3">
                                        <div class="d-flex align-items-center justify-content-between flex-wrap">
                                            <div>
                                                <p class="text-muted mb-0">عدد الموظفين النشط </p>
                                                <h4 class="fw-semibold mt-1">{{active_Empolyee}}</h4>
                                            </div>
                                            <div id="crm-total-revenue"></div>
                                        </div>
                                        <div class="d-flex align-items-center justify-content-between mt-1">
                                            <div>
                                                <a class="text-secondary" href="{% url 'show_table' 2 %}">رؤية الجميع<i class="ti ti-arrow-narrow-right ms-2 fw-semibold d-inline-block"></i></a>
                                            </div>
                                            <div class="text-end">
                                                <p class="mb-0 text-success fw-semibold">+25%</p>
                                                <span class="text-muted op-7 fs-11">هذا الشهر</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                   
                    <div class="col-xxl-6 col-lg-6 col-md-6">
                        <div class="card custom-card overflow-hidden">
                            <div class="card-header justify-content-between">
                                <div class="card-title pt-0 mt-0">
                                    اجمالي عدد الزائرين                              
                                      </div>
                                <div class="dropdown" style="z-index: 300000;">
                                    <a href="javascript:void(0);" class="p-2 fs-12 text-muted" data-bs-toggle="dropdown"
                                        aria-expanded="false">
                                        رؤية الجميع<i class="ri-arrow-down-s-line align-middle ms-1 d-inline-block"></i>
                                    </a>
                                    <ul class="dropdown-menu "  style="overflow: auto;" role="menu" style="z-index: 30000;">
                                        <li><a class="dropdown-item" href="javascript:void(0);" onclick="changed(`{{active_visitor_all}}`,3)">الكل</a></li>
                                        <li><a class="dropdown-item" href="javascript:void(0);" onclick="changed(`{{active_visitor_day}}`,4)">اليوم</a></li>
                                        <li><a class="dropdown-item" href="javascript:void(0);" onclick="changed(`{{active_visitor_week}}`,5)">هذا الاسبوع</a></li>
                                        <li><a class="dropdown-item" href="javascript:void(0);" onclick="changed(`{{active_visitor_month}}`,6)">هذا الشهر</a></li>
                                        <li><a class="dropdown-item" href="javascript:void(0);" onclick="changed(`{{active_visitor_year}}`,7)">هذه السنة</a></li>
                                    </ul>
                                </div>
                            </div>
                            <div class="card-body " style="margin-bottom: 40px;">
                              
                                <div class="d-flex align-items-top justify-content-between">
                                    <div>
                                        <span class="avatar avatar-md avatar-rounded bg-success">
                                            <i class="ti ti-users fs-16"></i>
                                        </span>
                                    </div>
                                    <div class="flex-fill ms-3">
                                        <div class="d-flex align-items-center justify-content-between flex-wrap">
                                            <div>
                                                <p class="text-muted mb-0">  </p>
                                                <h4 class="fw-semibold mt-1" id="display_num">{{active_visitor_all}}</h4>
                                            </div>
                                            <div id="crm-conversion-ratio"></div>
                                        </div>
                                        <div class="d-flex align-items-center justify-content-between mt-1">
                                            <div>
                                                <a class="text-success" href="{% url 'show_table' 3 %}" id="view_all1">رؤية الجميع<i class="ti ti-arrow-narrow-right ms-2 fw-semibold d-inline-block"></i></a>
                                            </div>
                                            <div class="text-end">
                                                <p class="mb-0 text-danger fw-semibold">-12%</p>
                                        <span class="text-muted op-7 fs-11">هذا الشهر</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-xxl-6 col-lg-6 col-md-6">
                        <div class="card custom-card overflow-hidden">
                            <div class="card-header justify-content-between">
                                <div class="card-title pt-0 mt-0">
                                     اجمالي عدد الزائرين  في ساعات العمل                            
                                      </div>
                                <div class="dropdown" style="z-index: 300000;">
                                    <a href="javascript:void(0);" class="p-2 fs-12 text-muted" data-bs-toggle="dropdown"
                                        aria-expanded="false">
                                        رؤية الجميع<i class="ri-arrow-down-s-line align-middle ms-1 d-inline-block"></i>
                                    </a>
                                    <ul class="dropdown-menu "  style="overflow: auto;" role="menu" style="z-index: 30000;">
                                        <li><a class="dropdown-item" href="javascript:void(0);" onclick="changeds(`{{active_visitor_all}}`,`active_visitor_all_after`,3)">الكل</a></li>
                                        <li><a class="dropdown-item" href="javascript:void(0);" onclick="changeds(`{{active_visitor_day}}`,`{{active_visitor_day_after}}`,4)">اليوم</a></li>
                                        <li><a class="dropdown-item" href="javascript:void(0);" onclick="changeds(`{{active_visitor_week}}`,`{{active_visitor_week_after}}`,5)">هذا الاسبوع</a></li>
                                        <li><a class="dropdown-item" href="javascript:void(0);" onclick="changeds(`{{active_visitor_month}}`,`{{active_visitor_month_after}}`,6)">هذا الشهر</a></li>
                                        <li><a class="dropdown-item" href="javascript:void(0);" onclick="changeds(`{{active_visitor_year}}`,`{{active_visitor_year_after}}`,7)">هذه السنة</a></li>
                                    </ul>
                                </div>
                            </div>
                            <div class="card-body " style="margin-bottom: 40px;">
                              
                                <div class="d-flex align-items-top justify-content-between">
                                    <div>
                                        <span class="avatar avatar-md avatar-rounded bg-success">
                                            <i class="ti ti-users fs-16"></i>
                                        </span>
                                    </div>
                                    <div class="flex-fill ms-3">
                                        <div class="d-flex align-items-center justify-content-between flex-wrap">
                                            <div>
                                                <p class="text-muted mb-0">  </p>
                                                <h4 class="fw-semibold mt-1" id="display_nums">{{active_visitor_all}}</h4>
                                            </div>
                                            <div id="crm-conversion-ratio"></div>
                                        </div>
                                        <div class="d-flex align-items-center justify-content-between mt-1">
                                            <div>
                                                <a class="text-success" href="{% url 'show_table' 3 %}" id="view_all1s">رؤية الجميع<i class="ti ti-arrow-narrow-right ms-2 fw-semibold d-inline-block"></i></a>
                                            </div>
                                            <div class="text-end">
                                                <p class="mb-0 text-danger fw-semibold">-12%</p>
                                        <span class="text-muted op-7 fs-11">هذا الشهر</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-xxl-6 col-lg-6 col-md-6">
                        <div class="card custom-card overflow-hidden">
                            <div class="card-header justify-content-between">
                                <div class="card-title pt-0 mt-0">
                                    اجمالي الزائرين بعد ساعات العمل                              
                                      </div>
                                <div class="dropdown" style="z-index: 300000;">
                                    <a href="javascript:void(0);" class="p-2 fs-12 text-muted" data-bs-toggle="dropdown"
                                        aria-expanded="false">
                                        رؤية الجميع<i class="ri-arrow-down-s-line align-middle ms-1 d-inline-block"></i>
                                    </a>
                                    <ul class="dropdown-menu "  style="overflow: auto;" role="menu" style="z-index: 30000;">
                                        <li><a class="dropdown-item" href="javascript:void(0);" onclick="changedd(`{{active_visitor_all_after}}`,8)">الكل</a></li>
                                        <li><a class="dropdown-item" href="javascript:void(0);" onclick="changedd(`{{active_visitor_day_after}}`,9)">اليوم</a></li>
                                        <li><a class="dropdown-item" href="javascript:void(0);" onclick="changedd(`{{active_visitor_week_after}}`,10)">هذا الاسبوع</a></li>
                                        <li><a class="dropdown-item" href="javascript:void(0);" onclick="changedd(`{{active_visitor_month_after}}`,11)">هذا الشهر</a></li>
                                        <li><a class="dropdown-item" href="javascript:void(0);" onclick="changedd(`{{active_visitor_year_after}}`,12)">هذه السنة</a></li>
                                    </ul>
                                </div>
                            </div>
                            <div class="card-body" style="margin-bottom: 40px;">
                                <div class="d-flex align-items-top justify-content-between">
                                    <div>
                                        <span class="avatar avatar-md avatar-rounded bg-warning">
                                            <i class="ti ti-users fs-16"></i>
                                        </span>
                                    </div>
                                    <div class="flex-fill ms-3">
                                        <div class="d-flex align-items-center justify-content-between flex-wrap">
                                            <div>
                                                <p class="text-muted mb-0">      </p>
                                                <h4 id="display2" class="fw-semibold mt-1">{{active_visitor_all_after}}</h4>
                                            </div>
                                            <div id="crm-total-deals"></div>
                                        </div>
                                        <div class="d-flex align-items-center justify-content-between mt-1">
                                            <div>
                                                <a class="text-warning" href="{% url 'show_table' 8 %}"  id="view_all2">رؤية الجميع<i class="ti ti-arrow-narrow-right ms-2 fw-semibold d-inline-block"></i></a>
                                            </div>
                                            <div class="text-end">
                                                <p class="mb-0 text-success fw-semibold">+19%</p>
                                                <span class="text-muted op-7 fs-11">هذا الشهر</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-xl-12">
                        <div class="card custom-card">
                            <div class="card-header justify-content-between">
                                <div class="card-title">
                                    احصائية الزائرون والمؤظفون
                                </div>
                                <div class="dropdown">
                                    <a href="javascript:void(0);" class="p-2 fs-12 text-muted" data-bs-toggle="dropdown"
                                        aria-expanded="false">
                                        رؤية الجميع<i class="ri-arrow-down-s-line align-middle ms-1 d-inline-block"></i>
                                    </a>
                                    <ul class="dropdown-menu" role="menu">
                                        <li><a class="dropdown-item" href="javascript:void(0);" onclick="changeChart(1)">اليوم</a></li>
                                        <li><a class="dropdown-item" href="javascript:void(0);" onclick="changeChart(2)">هذا الاسبوع</a></li>
                                        <li><a class="dropdown-item" href="javascript:void(0);" onclick="changeChart(3)">هذا الشهر</a></li>
                                        <li><a class="dropdown-item" href="javascript:void(0);" onclick="changeChart(4)">هذه السنة</a></li>
                                    </ul>
                                </div>
                            </div>
                            <div class="card-body">
                                <div class="content-wrapper">
                                    <div id="crm-revenue-analytics_day"></div>
                                    <!-- <div id="crm-revenue-analytics_week"></div>
                                    <div id="crm-revenue-analytics_month"></div>
                                    <div id="crm-revenue-analytics_year"></div> -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-xl-12">
                <div class="card custom-card">
                    <div class="card-header justify-content-between">
                        <div class="card-title">
                           جدول الدخول والخروج
                        </div>
                        
                    </div>
                    <div class="card-body">
                        <div class="table-responsive">
                            <table id="file-export" class="table table-bordered text-nowrap w-100">
                                <thead>
                                    <tr>
                                        <th>الموظف</th>
                                        <th>وقت الدخول</th>
                                        <th>وقت الخروج</th>
                                        <th>عدد ساعات العمل</th>
                                        <th>اذن خروج</th>
                                        <th>اذن دخول</th>

                                    </tr>
                                </thead>
                                <tbody>
                                    {% for per in detected_today %}
                                    
                                    <tr style="color:{{per.color}} !important">
                                        <td style="color: inherit;">{{per.name}}</td>
                                        <td style="color: inherit;">{{per.detected_at}}</td>
                                        <td style="color: inherit;">{{per.outed_at}}</td>
                                        <td style="color: inherit;">{{per.spend_time}}</td>
                                        <td style="color: inherit;">{{per.reason_out}}</td>
                                        <td style="color: inherit;">{{per.reason_in}}</td>
                                    </tr>
                                    {% endfor %}
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <!-- <div class="card-footer">
                        <div class="d-flex align-items-center">
                            <div>
                                Showing 5 Entries <i class="bi bi-arrow-right ms-2 fw-semibold"></i>
                            </div>
                            <div class="ms-auto">
                                <nav aria-label="Page navigation" class="pagination-style-4">
                                    <ul class="pagination mb-0">
                                        <li class="page-item disabled">
                                            <a class="page-link" href="javascript:void(0);">
                                                Prev
                                            </a>
                                        </li>
                                        <li class="page-item active"><a class="page-link" href="javascript:void(0);">1</a></li>
                                        <li class="page-item"><a class="page-link" href="javascript:void(0);">2</a></li>
                                        <li class="page-item">
                                            <a class="page-link text-primary" href="javascript:void(0);">
                                                next
                                            </a>
                                        </li>
                                    </ul>
                                </nav>
                            </div>
                        </div>
                    </div> -->
                </div>
            </div>
            {% include "home/permissions.html" %}
        </div>
    </div>
    <div class="col-xxl-3 col-xl-12">
        <div class="row">
            <div class="col-xxl-12 col-xl-12">
                <div class="row">
                    <div class="col-xl-12 col-xl-6">
                        <div class="card custom-card">
                            <div class="card-header justify-content-between">
                                <div class="card-title">
                                    الاحصائية حسب الاقسام
                                </div>
                                <div class="dropdown">
                                    <a aria-label="anchor" href="javascript:void(0);" class="btn btn-icon btn-sm btn-light" data-bs-toggle="dropdown">
                                        <i class="fe fe-more-vertical"></i>
                                    </a>
                                    <ul class="dropdown-menu">
                                        <li><a class="dropdown-item" href="javascript:void(0);" onclick="on_show_d(1)">زائرين</a></li>
                                        <li><a class="dropdown-item" href="javascript:void(0);" onclick="on_show_d(2)">مزظفين</a></li>
                                        
                                    </ul>
                                </div>
                            </div>
                            <div class="card-body p-0 overflow-hidden"  id="d_vis">
                                <div class="leads-source-chart d-flex align-items-center justify-content-center">
                                    <canvas id="leads-source" class="chartjs-chart w-100 p-4"></canvas>
                                    <div class="lead-source-value">
                                        <span class="d-block fs-14">المجموع</span>
                                        <span class="d-block fs-25 fw-bold">{{total_deps}}</span>
                                    </div>
                                </div>
                                <div class="row row-cols-12 border-top border-block-start-dashed">
                                    {% for dep in departments %}
                                    <div class="col p-0">
                                        <div class="ps-4 py-3 pe-3 text-center border-end border-inline-end-dashed">
                                            <span class="text-muted fs-12 mb-1 crm-lead-legend mobile d-inline-block">{{dep.name}}
                                            </span>
                                            <div><span class="fs-16 fw-semibold">{{counts_department|get_item:forloop.counter0}}</span>
                                            </div>
                                        </div>
                                    </div>
                                    {% endfor %}
                                    
                                    <!-- <div class="col p-0">
                                        <div class="p-3 text-center border-end border-inline-end-dashed">
                                            <span class="text-muted fs-12 mb-1 crm-lead-legend desktop d-inline-block">Black List
                                            </span>
                                            <div><span class="fs-16 fw-semibold">{{detection_count_black}}</span></div>
                                        </div>
                                    </div>
                                    <div class="col p-0">
                                        <div class="p-3 text-center border-end border-inline-end-dashed">
                                            <span class="text-muted fs-12 mb-1 crm-lead-legend laptop d-inline-block">Unkown
                                            </span>
                                            <div><span class="fs-16 fw-semibold">{{detection_count_unknown}}</span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col p-0">
                                        <div class="p-3 text-center">
                                            <span class="text-muted fs-12 mb-1 crm-lead-legend tablet d-inline-block">White list
                                            </span>
                                            <div><span class="fs-16 fw-semibold">{{detection_count_white}}</span></div>
                                        </div>
                                    </div> -->
                                </div>
                            </div>
                            <div class="card-body p-0 overflow-hidden" id="d_emp">
                                <div class="leads-source-chart d-flex align-items-center justify-content-center">
                                    <canvas id="leads-source" class="chartjs-chart w-100 p-4"></canvas>
                                    <div class="lead-source-value">
                                        <span class="d-block fs-14">المجموع</span>
                                        <span class="d-block fs-25 fw-bold">{{total_deps_2}}</span>
                                    </div>
                                </div>
                                <div class="row row-cols-12 border-top border-block-start-dashed">
                                    {% for dep in departments %}
                                    <div class="col p-0">
                                        <div class="ps-4 py-3 pe-3 text-center border-end border-inline-end-dashed">
                                            <span class="text-muted fs-12 mb-1 crm-lead-legend mobile d-inline-block">{{dep.name}}
                                            </span>
                                            <div><span class="fs-16 fw-semibold">{{counts_department_2|get_item:forloop.counter0}}</span>
                                            </div>
                                        </div>
                                    </div>
                                    {% endfor %}
                                    
                                    <!-- <div class="col p-0">
                                        <div class="p-3 text-center border-end border-inline-end-dashed">
                                            <span class="text-muted fs-12 mb-1 crm-lead-legend desktop d-inline-block">Black List
                                            </span>
                                            <div><span class="fs-16 fw-semibold">{{detection_count_black}}</span></div>
                                        </div>
                                    </div>
                                    <div class="col p-0">
                                        <div class="p-3 text-center border-end border-inline-end-dashed">
                                            <span class="text-muted fs-12 mb-1 crm-lead-legend laptop d-inline-block">Unkown
                                            </span>
                                            <div><span class="fs-16 fw-semibold">{{detection_count_unknown}}</span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col p-0">
                                        <div class="p-3 text-center">
                                            <span class="text-muted fs-12 mb-1 crm-lead-legend tablet d-inline-block">White list
                                            </span>
                                            <div><span class="fs-16 fw-semibold">{{detection_count_white}}</span></div>
                                        </div>
                                    </div> -->
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- <div class="col-xxl-12 col-xl-6">
                        <div class="card custom-card">
                            <div class="card-header justify-content-between">
                                <div class="card-title">
                                    Deals Status
                                </div>
                                <div class="dropdown">
                                    <a href="javascript:void(0);" class="p-2 fs-12 text-muted" data-bs-toggle="dropdown" aria-expanded="false">
                                        رؤية الجميع<i class="ri-arrow-down-s-line align-middle ms-1 d-inline-block"></i>
                                    </a>
                                    <ul class="dropdown-menu" role="menu">
                                        <li><a class="dropdown-item" href="javascript:void(0);">Today</a></li>
                                        <li><a class="dropdown-item" href="javascript:void(0);">This Week</a></li>
                                        <li><a class="dropdown-item" href="javascript:void(0);">Last Week</a></li>
                                    </ul>
                                </div>
                            </div>
                            <div class="card-body">
                                <div class="d-flex align-items-center mb-3">
                                    <h4 class="fw-bold mb-0">4,289</h4>
                                    <div class="ms-2">
                                        <span class="badge bg-success-transparent">1.02<i class="ri-arrow-up-s-fill align-mmiddle ms-1"></i></span>
                                        <span class="text-muted ms-1">compared to last week</span>
                                    </div>
                                </div>
                                <div class="progress-stacked progress-animate progress-xs mb-4">
                                    <div class="progress-bar" role="progressbar" style="width: 21%" aria-valuenow="21" aria-valuemin="0" aria-valuemax="100"></div>
                                    <div class="progress-bar bg-info" role="progressbar" style="width: 26%" aria-valuenow="26" aria-valuemin="0" aria-valuemax="100"></div>
                                    <div class="progress-bar bg-warning" role="progressbar" style="width: 35%" aria-valuenow="35" aria-valuemin="0" aria-valuemax="100"></div>
                                    <div class="progress-bar bg-success" role="progressbar" style="width: 18%" aria-valuenow="18" aria-valuemin="0" aria-valuemax="100"></div>
                                </div>
                                <ul class="list-unstyled mb-0 pt-2 crm-deals-status">
                                    <li class="primary">
                                        <div class="d-flex align-items-center justify-content-between">
                                            <div>Successful Deals</div>
                                            <div class="fs-12 text-muted">987 deals</div>
                                        </div>
                                    </li>
                                    <li class="info">
                                        <div class="d-flex align-items-center justify-content-between">
                                            <div>Pending Deals</div>
                                            <div class="fs-12 text-muted">1,073 deals</div>
                                        </div>
                                    </li>
                                    <li class="warning">
                                        <div class="d-flex align-items-center justify-content-between">
                                            <div>Rejected Deals</div>
                                            <div class="fs-12 text-muted">1,674 deals</div>
                                        </div>
                                    </li>
                                    <li class="success">
                                        <div class="d-flex align-items-center justify-content-between">
                                            <div>Upcoming Deals</div>
                                            <div class="fs-12 text-muted">921 deals</div>
                                        </div>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div> -->
                    <!-- <div class="col-xxl-12 col-xl-6">
                        <div class="card custom-card">
                            <div class="card-header justify-content-between">
                                <div class="card-title">
                                    Recent Activity
                                </div>
                                <div class="dropdown">
                                    <a href="javascript:void(0);" class="p-2 fs-12 text-muted" data-bs-toggle="dropdown"
                                        aria-expanded="false">
                                        رؤية الجميع<i class="ri-arrow-down-s-line align-middle ms-1 d-inline-block"></i>
                                    </a>
                                    <ul class="dropdown-menu" role="menu">
                                        <li><a class="dropdown-item" href="javascript:void(0);">Today</a></li>
                                        <li><a class="dropdown-item" href="javascript:void(0);">This Week</a></li>
                                        <li><a class="dropdown-item" href="javascript:void(0);">Last Week</a></li>
                                    </ul>
                                </div>
                            </div>
                            <div class="card-body">
                                <div>
                                    <ul class="list-unstyled mb-0 crm-recent-activity">
                                        <li class="crm-recent-activity-content">
                                            <div class="d-flex align-items-top">
                                                <div class="me-3">
                                                    <span class="avatar avatar-xs bg-primary-transparent avatar-rounded">
                                                        <i class="bi bi-circle-fill fs-8"></i>
                                                    </span>
                                                </div>
                                                <div class="crm-timeline-content">
                                                    <span class="fw-semibold">Update of calendar events &amp;</span><span><a href="javascript:void(0);" class="text-primary fw-semibold"> Added new events in next week.</a></span>
                                                </div>
                                                <div class="flex-fill text-end">
                                                    <span class="d-block text-muted fs-11 op-7">4:45PM</span>
                                                </div>
                                            </div>
                                        </li>
                                        <li class="crm-recent-activity-content">
                                            <div class="d-flex align-items-top">
                                                <div class="me-3">
                                                    <span class="avatar avatar-xs bg-secondary-transparent avatar-rounded">
                                                        <i class="bi bi-circle-fill fs-8"></i>
                                                    </span>
                                                </div>
                                                <div class="crm-timeline-content">
                                                    <span>New theme for <span class="fw-semibold">Spruko Website</span> completed</span>
                                                    <span class="d-block fs-12 text-muted">Lorem ipsum, dolor sit amet.</span>
                                                </div>
                                                <div class="flex-fill text-end">
                                                    <span class="d-block text-muted fs-11 op-7">3 hrs</span>
                                                </div>
                                            </div>
                                        </li>
                                        <li class="crm-recent-activity-content">
                                            <div class="d-flex align-items-top">
                                                <div class="me-3">
                                                    <span class="avatar avatar-xs bg-success-transparent avatar-rounded">
                                                        <i class="bi bi-circle-fill fs-8"></i>
                                                    </span>
                                                </div>
                                                <div class="crm-timeline-content">
                                                    <span>Created a <span class="text-success fw-semibold">New Task</span> today <span class="avatar avatar-xs bg-purple-transparent avatar-rounded ms-1"><i class="ri-add-fill text-purple fs-12"></i></span></span>
                                                </div>
                                                <div class="flex-fill text-end">
                                                    <span class="d-block text-muted fs-11 op-7">22 hrs</span>
                                                </div>
                                            </div>
                                        </li>
                                        <li class="crm-recent-activity-content">
                                            <div class="d-flex align-items-top">
                                                <div class="me-3">
                                                    <span class="avatar avatar-xs bg-pink-transparent avatar-rounded">
                                                        <i class="bi bi-circle-fill fs-8"></i>
                                                    </span>
                                                </div>
                                                <div class="crm-timeline-content">
                                                    <span>New member <span class="badge bg-pink-transparent">@andreas gurrero</span> added today to AI Summit.</span>
                                                </div>
                                                <div class="flex-fill text-end">
                                                    <span class="d-block text-muted fs-11 op-7">Today</span>
                                                </div>
                                            </div>
                                        </li>
                                        <li class="crm-recent-activity-content">
                                            <div class="d-flex align-items-top">
                                                <div class="me-3">
                                                    <span class="avatar avatar-xs bg-warning-transparent avatar-rounded">
                                                        <i class="bi bi-circle-fill fs-8"></i>
                                                    </span>
                                                </div>
                                                <div class="crm-timeline-content">
                                                    <span>32 New people joined summit.</span>
                                                </div>
                                                <div class="flex-fill text-end">
                                                    <span class="d-block text-muted fs-11 op-7">22 hrs</span>
                                                </div>
                                            </div>
                                        </li>
                                        <li class="crm-recent-activity-content">
                                            <div class="d-flex align-items-top">
                                                <div class="me-3">
                                                    <span class="avatar avatar-xs bg-info-transparent avatar-rounded">
                                                        <i class="bi bi-circle-fill fs-8"></i>
                                                    </span>
                                                </div>
                                                <div class="crm-timeline-content">
                                                    <span>Neon Tarly added <span class="text-info fw-semibold">Robert Bright</span> to AI summit project.</span>
                                                </div>
                                                <div class="flex-fill text-end">
                                                    <span class="d-block text-muted fs-11 op-7">12 hrs</span>
                                                </div>
                                            </div>
                                        </li>
                                        <li class="crm-recent-activity-content">
                                            <div class="d-flex align-items-top">
                                                <div class="me-3">
                                                    <span class="avatar avatar-xs bg-dark-transparent avatar-rounded">
                                                        <i class="bi bi-circle-fill fs-8"></i>
                                                    </span>
                                                </div>
                                                <div class="crm-timeline-content">
                                                    <span>Replied to new support request <i class="ri-checkbox-circle-line text-success fs-16 align-middle"></i></span>
                                                </div>
                                                <div class="flex-fill text-end">
                                                    <span class="d-block text-muted fs-11 op-7">4 hrs</span>
                                                </div>
                                            </div>
                                        </li>
                                        <li class="crm-recent-activity-content">
                                            <div class="d-flex align-items-top">
                                                <div class="me-3">
                                                    <span class="avatar avatar-xs bg-purple-transparent avatar-rounded">
                                                        <i class="bi bi-circle-fill fs-8"></i>
                                                    </span>
                                                </div>
                                                <div class="crm-timeline-content">
                                                    <span>Completed documentation of <a href="javascript:void(0);" class="text-purple text-decoration-underline fw-semibold">AI Summit.</a></span>
                                                </div>
                                                <div class="flex-fill text-end">
                                                    <span class="d-block text-muted fs-11 op-7">4 hrs</span>
                                                </div>
                                            </div>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div> -->
                </div>
            </div>
        </div>
    </div>
</div>
<!-- End::row-1 -->
{% endblock %}


{% block scripts %}
<script src="https://cdn.datatables.net/1.12.1/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/1.12.1/js/dataTables.bootstrap5.min.js"></script>
    <script src="https://cdn.datatables.net/responsive/2.3.0/js/dataTables.responsive.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/2.2.3/js/dataTables.buttons.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/2.2.3/js/buttons.print.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.6/pdfmake.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/vfs_fonts.js"></script>
    <script src="https://cdn.datatables.net/buttons/2.2.3/js/buttons.html5.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
    <script src="{% static 'dist/js/datatables.js' %}"></script>
    <script>
        var data_day_vis=[
                {
                    x: '0-2',
                    y: `{{counts_day_vis|get_item:0}}`
                },
                {
                    x: '2-4',
                    y: `{{counts_day_vis|get_item:1}}`
                },
                {
                    x: '4-6',
                    y: `{{counts_day_vis|get_item:2}}`
                },
                {
                    x: '6-8',
                    y: `{{counts_day_vis|get_item:3}}`
                },
                {
                    x: '8-10',
                    y: `{{counts_day_vis|get_item:4}}`
                },
                {
                    x: '10-12',
                    y: `{{counts_day_vis|get_item:5}}`
                },
                {
                    x: '12-14',
                    y: `{{counts_day_vis|get_item:6}}`
                },
                {
                    x: '14-16',
                    y: `{{counts_day_vis|get_item:7}}`
                },
                {
                    x: '16-18',
                    y: `{{counts_day_vis|get_item:8}}`
                },
                {
                    x: '18-20',
                    y: `{{counts_day_vis|get_item:9}}`
                },
                {
                    x: '20-22',
                    y: `{{counts_day_vis|get_item:10}}`
                },
                {
                    x: '22-24',
                    y: `{{counts_day_vis|get_item:11}}`
                }
            ];
        var data_day_emp=[
                {
                    x: '0-2',
                    y: `{{counts_day_emp|get_item:0}}`
                },
                {
                    x: '2-4',
                    y: `{{counts_day_emp|get_item:1}}`
                },
                {
                    x: '4-6',
                    y: `{{counts_day_emp|get_item:2}}`
                },
                {
                    x: '6-8',
                    y: `{{counts_day_emp|get_item:3}}`
                },
                {
                    x: '8-10',
                    y: `{{counts_day_emp|get_item:4}}`
                },
                {
                    x: '10-12',
                    y: `{{counts_day_emp|get_item:5}}`
                },
                {
                    x: '12-14',
                    y: `{{counts_day_emp|get_item:6}}`
                },
                {
                    x: '14-16',
                    y: `{{counts_day_emp|get_item:7}}`
                },
                {
                    x: '16-18',
                    y: `{{counts_day_emp|get_item:8}}`
                },
                {
                    x: '18-20',
                    y: `{{counts_day_emp|get_item:9}}`
                },
                {
                    x: '20-22',
                    y: `{{counts_day_emp|get_item:10}}`
                },
                {
                    x: '22-24',
                    y: `{{counts_day_emp|get_item:11}}`
                }
            ]
        
        var data_week_vis=[
                {
                    x: 'السبت',
                    y: `{{counts_week_vis|get_item:0}}`
                },
                {
                    x: 'الاحد',
                    y: `{{counts_week_vis|get_item:1}}`
                },
                {
                    x: 'الاثنين',
                    y: `{{counts_week_vis|get_item:2}}`
                },
                {
                    x: 'الثلاثاء',
                    y: `{{counts_week_vis|get_item:3}}`
                },
                {
                    x: 'الاربع',
                    y: `{{counts_week_vis|get_item:4}}`
                },
                {
                    x: 'الخميس',
                    y: `{{counts_week_vis|get_item:5}}`
                },
                {
                    x: 'الجمعة',
                    y: `{{counts_week_vis|get_item:6}}`
                },
                
            ];
        var data_week_emp=[
        {
                    x: 'السبت',
                    y: `{{counts_week_emp|get_item:0}}`
                },
                {
                    x: 'الاحد',
                    y: `{{counts_week_emp|get_item:1}}`
                },
                {
                    x: 'الاثنين',
                    y: `{{counts_week_emp|get_item:2}}`
                },
                {
                    x: 'الثلاثاء',
                    y: `{{counts_week_emp|get_item:3}}`
                },
                {
                    x: 'الاربع',
                    y: `{{counts_week_emp|get_item:4}}`
                },
                {
                    x: 'الخميس',
                    y: `{{counts_week_emp|get_item:5}}`
                },
                {
                    x: 'الجمعة',
                    y: `{{counts_week_emp|get_item:6}}`
                },
            ]
        var data_month_vis=[
                {
                    x: '1-5',
                    y: `{{counts_month_vis|get_item:0}}`
                },
                {
                    x: '5-10',
                    y: `{{counts_month_vis|get_item:1}}`
                },
                {
                    x: '10-15',
                    y: `{{counts_month_vis|get_item:2}}`
                },
                {
                    x: '15-20',
                    y: `{{counts_month_vis|get_item:3}}`
                },
                {
                    x: '20-25',
                    y: `{{counts_month_vis|get_item:4}}`
                },
                {
                    x: '25-30',
                    y: `{{counts_month_vis|get_item:5}}`
                },
               
                
            ];
        var data_month_emp=[
        {
                    x: '1-5',
                    y: `{{counts_month_emp|get_item:0}}`
                },
                {
                    x: '5-10',
                    y: `{{counts_month_emp|get_item:1}}`
                },
                {
                    x: '10-15',
                    y: `{{counts_month_emp|get_item:2}}`
                },
                {
                    x: '15-20',
                    y: `{{counts_month_emp|get_item:3}}`
                },
                {
                    x: '20-25',
                    y: `{{counts_month_emp|get_item:4}}`
                },
                {
                    x: '25-30',
                    y: `{{counts_month_emp|get_item:5}}`
                },
              
            ]
        var data_year_vis=[
                {
                    x: '1',
                    y: `{{counts_year_vis|get_item:0}}`
                },
                {
                    x: '2',
                    y: `{{counts_year_vis|get_item:1}}`
                },
                {
                    x: '3',
                    y: `{{counts_year_vis|get_item:2}}`
                },
                {
                    x: '4',
                    y: `{{counts_year_vis|get_item:3}}`
                },
                {
                    x: '5',
                    y: `{{counts_year_vis|get_item:4}}`
                },
                {
                    x: '6',
                    y: `{{counts_year_vis|get_item:5}}`
                },
                {
                    x: '7',
                    y: `{{counts_year_vis|get_item:5}}`
                },
                {
                    x: '8',
                    y: `{{counts_year_vis|get_item:5}}`
                },
                {
                    x: '9',
                    y: `{{counts_year_vis|get_item:5}}`
                },
                {
                    x: '10',
                    y: `{{counts_year_vis|get_item:5}}`
                },
                {
                    x: '11',
                    y: `{{counts_year_vis|get_item:5}}`
                },
                {
                    x: '12',
                    y: `{{counts_year_vis|get_item:5}}`
                },
               
                
            ];
        var data_year_emp=[
        {
                    x: '1',
                    y: `{{counts_year_emp|get_item:0}}`
                },
                {
                    x: '2',
                    y: `{{counts_year_emp|get_item:1}}`
                },
                {
                    x: '3',
                    y: `{{counts_year_emp|get_item:2}}`
                },
                {
                    x: '4',
                    y: `{{counts_year_emp|get_item:3}}`
                },
                {
                    x: '5',
                    y: `{{counts_year_emp|get_item:4}}`
                },
                {
                    x: '6',
                    y: `{{counts_year_emp|get_item:5}}`
                },
                {
                    x: '7',
                    y: `{{counts_year_emp|get_item:5}}`
                },
                {
                    x: '8',
                    y: `{{counts_year_emp|get_item:5}}`
                },
                {
                    x: '9',
                    y: `{{counts_year_emp|get_item:5}}`
                },
                {
                    x: '10',
                    y: `{{counts_year_emp|get_item:5}}`
                },
                {
                    x: '11',
                    y: `{{counts_year_emp|get_item:5}}`
                },
                {
                    x: '12',
                    y: `{{counts_year_emp|get_item:5}}`
                },
              
            ]

    var options_day = {
    series: [
        {
            type: 'line',
            name: 'الزائرون',
            data: data_day_vis
        },
        {
            type: 'line',
            name: 'المزظفون',
            chart: {
                dropShadow: {
                    enabled: true,
                    enabledOnSeries: undefined,
                    top: 5,
                    left: 0,
                    blur: 3,
                    color: '#000',
                    opacity: 0.1
                }
            },
            data:data_day_emp
        }
       ],
    chart: {
        height: 350,
        animations: {
            speed: 500
        },
        dropShadow: {
            enabled: true,
            enabledOnSeries: undefined,
            top: 8,
            left: 0,
            blur: 3,
            color: '#000',
            opacity: 0.1
        },
    },
    colors: ["rgb(132, 90, 223)", "rgba(35, 183, 229, 0.85)", "rgba(119, 119, 142, 0.05)"],
    dataLabels: {
        enabled: false
    },
    grid: {
        borderColor: '#f1f1f1',
        strokeDashArray: 3
    },
    stroke: {
        curve: 'smooth',
        width: [2, 2, 0],
        dashArray: [0, 5, 0],
    },
    xaxis: {
        axisTicks: {
            show: false,
        },
    },
    yaxis: {
        labels: {
            formatter: function (value) {
                return "" + value;
            }
        },
    },
    tooltip: {
        y: [{
            formatter: function(e) {
                return void 0 !== e ? " " + e.toFixed(0) : e
            }
        }, {
            formatter: function(e) {
                return void 0 !== e ? "" + e.toFixed(0) : e
            }
        }, {
            formatter: function(e) {
                return void 0 !== e ? e.toFixed(0) : e
            }
        }]
    },
    legend: {
        show: true,
        customLegendItems: ['الزائرون', 'الموظفون'],
        inverseOrder: true
    },
   
    markers: {
        hover: {
            sizeOffset: 5
        }
    }
};
    var options_week = {
    series: [
        {
            type: 'line',
            name: 'الزائرون',
            data: data_week_vis
        },
        {
            type: 'line',
            name: 'المزظفون',
            chart: {
                dropShadow: {
                    enabled: true,
                    enabledOnSeries: undefined,
                    top: 5,
                    left: 0,
                    blur: 3,
                    color: '#000',
                    opacity: 0.1
                }
            },
            data:data_week_emp
        }
       ],
    chart: {
        height: 350,
        animations: {
            speed: 500
        },
        dropShadow: {
            enabled: true,
            enabledOnSeries: undefined,
            top: 8,
            left: 0,
            blur: 3,
            color: '#000',
            opacity: 0.1
        },
    },
    colors: ["rgb(132, 90, 223)", "rgba(35, 183, 229, 0.85)", "rgba(119, 119, 142, 0.05)"],
    dataLabels: {
        enabled: false
    },
    grid: {
        borderColor: '#f1f1f1',
        strokeDashArray: 3
    },
    stroke: {
        curve: 'smooth',
        width: [2, 2, 0],
        dashArray: [0, 5, 0],
    },
    xaxis: {
        axisTicks: {
            show: false,
        },
    },
    yaxis: {
        labels: {
            formatter: function (value) {
                return "" + value;
            }
        },
    },
    tooltip: {
        y: [{
            formatter: function(e) {
                return void 0 !== e ? " " + e.toFixed(0) : e
            }
        }, {
            formatter: function(e) {
                return void 0 !== e ? "" + e.toFixed(0) : e
            }
        }, {
            formatter: function(e) {
                return void 0 !== e ? e.toFixed(0) : e
            }
        }]
    },
    legend: {
        show: true,
        customLegendItems: ['الزائرون', 'الموظفون'],
        inverseOrder: true
    },
   
    markers: {
        hover: {
            sizeOffset: 5
        }
    }
};
    var options_month = {
    series: [
        {
            type: 'line',
            name: 'الزائرون',
            data: data_month_vis
        },
        {
            type: 'line',
            name: 'المزظفون',
            chart: {
                dropShadow: {
                    enabled: true,
                    enabledOnSeries: undefined,
                    top: 5,
                    left: 0,
                    blur: 3,
                    color: '#000',
                    opacity: 0.1
                }
            },
            data:data_month_emp
        }
       ],
    chart: {
        height: 350,
        animations: {
            speed: 500
        },
        dropShadow: {
            enabled: true,
            enabledOnSeries: undefined,
            top: 8,
            left: 0,
            blur: 3,
            color: '#000',
            opacity: 0.1
        },
    },
    colors: ["rgb(132, 90, 223)", "rgba(35, 183, 229, 0.85)", "rgba(119, 119, 142, 0.05)"],
    dataLabels: {
        enabled: false
    },
    grid: {
        borderColor: '#f1f1f1',
        strokeDashArray: 3
    },
    stroke: {
        curve: 'smooth',
        width: [2, 2, 0],
        dashArray: [0, 5, 0],
    },
    xaxis: {
        axisTicks: {
            show: false,
        },
    },
    yaxis: {
        labels: {
            formatter: function (value) {
                return "" + value;
            }
        },
    },
    tooltip: {
        y: [{
            formatter: function(e) {
                return void 0 !== e ? " " + e.toFixed(0) : e
            }
        }, {
            formatter: function(e) {
                return void 0 !== e ? "" + e.toFixed(0) : e
            }
        }, {
            formatter: function(e) {
                return void 0 !== e ? e.toFixed(0) : e
            }
        }]
    },
    legend: {
        show: true,
        customLegendItems: ['الزائرون', 'الموظفون'],
        inverseOrder: true
    },
   
    markers: {
        hover: {
            sizeOffset: 5
        }
    }
};
    var options_year = {
    series: [
        {
            type: 'line',
            name: 'الزائرون',
            data: data_year_vis
        },
        {
            type: 'line',
            name: 'المزظفون',
            chart: {
                dropShadow: {
                    enabled: true,
                    enabledOnSeries: undefined,
                    top: 5,
                    left: 0,
                    blur: 3,
                    color: '#000',
                    opacity: 0.1
                }
            },
            data:data_year_emp
        }
       ],
    chart: {
        height: 350,
        animations: {
            speed: 500
        },
        dropShadow: {
            enabled: true,
            enabledOnSeries: undefined,
            top: 8,
            left: 0,
            blur: 3,
            color: '#000',
            opacity: 0.1
        },
    },
    colors: ["rgb(132, 90, 223)", "rgba(35, 183, 229, 0.85)", "rgba(119, 119, 142, 0.05)"],
    dataLabels: {
        enabled: false
    },
    grid: {
        borderColor: '#f1f1f1',
        strokeDashArray: 3
    },
    stroke: {
        curve: 'smooth',
        width: [2, 2, 0],
        dashArray: [0, 5, 0],
    },
    xaxis: {
        axisTicks: {
            show: false,
        },
    },
    yaxis: {
        labels: {
            formatter: function (value) {
                return "" + value;
            }
        },
    },
    tooltip: {
        y: [{
            formatter: function(e) {
                return void 0 !== e ? " " + e.toFixed(0) : e
            }
        }, {
            formatter: function(e) {
                return void 0 !== e ? "" + e.toFixed(0) : e
            }
        }, {
            formatter: function(e) {
                return void 0 !== e ? e.toFixed(0) : e
            }
        }]
    },
    legend: {
        show: true,
        customLegendItems: ['الزائرون', 'الموظفون'],
        inverseOrder: true
    },
   
    markers: {
        hover: {
            sizeOffset: 5
        }
    }
};
document.getElementById('crm-revenue-analytics_day').innerHTML = '';
var chart = new ApexCharts(document.querySelector("#crm-revenue-analytics_day"), options_year);
chart.render();

function changeChart(id){
    if(id==1){
        document.getElementById('crm-revenue-analytics_day').innerHTML = '';
        var chart = new ApexCharts(document.querySelector("#crm-revenue-analytics_day"), options_day);
chart.render();
    }else if(id==2){
        document.getElementById('crm-revenue-analytics_day').innerHTML = '';
        var chart = new ApexCharts(document.querySelector("#crm-revenue-analytics_day"), options_week);
chart.render();
    }else if(id==3){
        document.getElementById('crm-revenue-analytics_day').innerHTML = '';
        var chart = new ApexCharts(document.querySelector("#crm-revenue-analytics_day"), options_month);
chart.render();
    }else{
        document.getElementById('crm-revenue-analytics_day').innerHTML = '';
        var chart = new ApexCharts(document.querySelector("#crm-revenue-analytics_day"), options_year);
chart.render();
    }
}

var departmentCounts = JSON.parse(decodeURIComponent('{{ counts_department|escapejs }}'));
backgroundColors=[]
for(var i=0;i<departmentCounts.length;i++){
    backgroundColors.push('rgb(132, 90, '+(i*10+5)+')')
}
console.log(departmentCounts);
Chart.defaults.elements.arc.borderWidth = 0;
Chart.defaults.datasets.doughnut.cutout = '85%';
var chartInstance = new Chart(document.getElementById("leads-source"), {
    type: 'doughnut',
    data: {
        datasets: [{
            label: 'My First Dataset',
            data: departmentCounts,
            backgroundColor:backgroundColors
            // backgroundColor: [
            //     'rgb(132, 90, 223)',
            //     'rgb(35, 183, 229)',
            //     'rgb(38, 191, 148)',
            //     'rgb(245, 184, 73)',
            // ]
        }]
    },
    plugins: [{
        afterUpdate: function (chart) {
            const arcs = chart.getDatasetMeta(0).data;

            arcs.forEach(function (arc) {
                arc.round = {
                    x: (chart.chartArea.left + chart.chartArea.right) / 2,
                    y: (chart.chartArea.top + chart.chartArea.bottom) / 2,
                    radius: (arc.outerRadius + arc.innerRadius) / 2,
                    thickness: (arc.outerRadius - arc.innerRadius) / 2,
                    backgroundColor: arc.options.backgroundColor
                }
            });
        },
        afterDraw: (chart) => {
            const {
                ctx,
                canvas
            } = chart;

            chart.getDatasetMeta(0).data.forEach(arc => {
                const startAngle = Math.PI / 2 - arc.startAngle;
                const endAngle = Math.PI / 2 - arc.endAngle;

                ctx.save();
                ctx.translate(arc.round.x, arc.round.y);
                ctx.fillStyle = arc.options.backgroundColor;
                ctx.beginPath();
                ctx.arc(arc.round.radius * Math.sin(endAngle), arc.round.radius * Math.cos(endAngle), arc.round.thickness, 0, 2 * Math.PI);
                ctx.closePath();
                ctx.fill();
                ctx.restore();
            });
        }
    }]
});

function leads(myVarVal) {

    chartInstance.data.datasets[0] = {
        label: 'My First Dataset',
        data: [32, 27, 25, 16],
        backgroundColor: [
            `rgb(${myVarVal})`,
            'rgb(35, 183, 229)',
            'rgb(245, 184, 73)',
            'rgb(38, 191, 148)',
        ]
    }
    chartInstance.update();

}
function changeds(num,num2,id){
    $('#view_all1s').attr("href","{% url 'show_table' 5 %}".replace('5', id));
    $('#display_nums').text(Number(num)-Number(num2))
}
function changed(num,id){
    $('#view_all1').attr("href","{% url 'show_table' 5 %}".replace('5', id));
    $('#display_num').text(num)
}
function changedd(num,id){
    $('#view_all2').attr("href", "{% url 'show_table' 5 %}".replace('5', id));
    
    $('#display2').text(num)
}
function on_show_d(id){
    if(id==1){
        $('#d_emp').hide()
        $('#d_vis').show()
    }else{
        $('#d_emp').show()
        $('#d_vis').hide()
    }
}
on_show_d(1)
    </script>
<script>
    function release() {
      $.ajax({
        url: "/cameras/release/",
        type: "GET",
        success: function (data) {
  
        },
        error: function (xhr, status, error) {
  
          console.error(error);
        }
      });
    }
    console.log("ahmed");
  release()
    
  </script>
{% endblock %}